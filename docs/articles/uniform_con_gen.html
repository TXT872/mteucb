<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mteucb">
<title>uniform_con_gen • mteucb</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="uniform_con_gen">
<meta property="og:description" content="mteucb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mteucb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/beta_gen.html">beta_gen</a>
    <a class="dropdown-item" href="../articles/p_hut_gen.html">p_hut_gen</a>
    <a class="dropdown-item" href="../articles/unif_gen.html">unif_gen</a>
    <a class="dropdown-item" href="../articles/uniform_con_gen.html">uniform_con_gen</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>uniform_con_gen</h1>
                        <h4 data-toc-skip class="author">Toshiki Tsuda
(<a href="mailto:toshiki.tsuda@yale.edu" class="email">toshiki.tsuda@yale.edu</a>), Yanchun Jin (<a href="mailto:chnjyc@gmail.com" class="email">chnjyc@gmail.com</a>), Ryo
Okui (<a href="mailto:okuiryo@e.u-tokyo.ac.jp" class="email">okuiryo@e.u-tokyo.ac.jp</a>)</h4>
            
      
      
      <div class="d-none name"><code>uniform_con_gen.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p>The <strong>mteucb</strong> provides four functions as below:</p>
<ul>
<li>
<code><a href="../reference/p_hut_gen.html">p_hut_gen()</a></code>: Estimation of propensity score thourgh
maximum likelihood estimation.</li>
<li>
<code>beta_hut_gen()</code>: Estimation of finite parameters by
partially linear estimation.</li>
<li>
<code><a href="../reference/unif_gen.html">unif_gen()</a></code>: Computation of uniform confidence bands for
an MTE function given the parametric part of MTE is known.</li>
<li>
<code><a href="../reference/uniform_con_gen.html">uniform_con_gen()</a></code>: Computation of uniform confidence
bands for an MTE function given data.</li>
</ul>
<p>In this page, we introduce how to use <code>unif_con_gen()</code> for
obtaining a confidence band of an MTE function.</p>
<div class="section level4">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h4>
<ul>
<li>
<code>outcome_name</code>: The name of the outcome</li>
<li>
<code>covariate_name</code>: The name of covariate</li>
<li>
<code>instrument_name</code>: The name of instrument variables</li>
<li>
<code>treatment_name</code>: The name of a treatment variable</li>
<li>
<code>data</code>: data.frame to be used for the estimation of
MTE</li>
<li>
<code>familiy</code>: The distribution used for the calculation of
the propensity score. You can choose “probit” or “logit”. The default
choice is “probit”.</li>
<li>
<code>trim</code>: To mitigate the effect of ill behavior of
estimated propensity scores, we set those estimated values less than or
larger than the value of trim as the value of the value of trim. The
default choice is “0.01”.</li>
<li>
<code>intercept</code>: ‘TRUE’ or ‘FLASE’ option to decide whether
you include an intercept for estimating the propensity score or not. The
default choice is ‘TRUE’.</li>
<li>
<code>se_type</code>: The sort of standard error sought. The options
are “HC0”, “HC1” (or “stata”, the equivalent) , “HC2” (default), “HC3”,
or “classical”.</li>
<li>
<code>bw</code>: The bandwidth used in estimating the nonparametric
part of MTE</li>
<li>
<code>l_eval</code>: The minimum value of evaluation points for the
estimated MTE</li>
<li>
<code>u_eval</code>: The maximum value of evaluation points for the
estimated MTE</li>
<li>
<code>kernel</code>: The kernel function used in estimating the
nonparametric part of MTE. You can choose ‘gaussK’ (gaussian kernel),
and ‘EapK’ (Epanechinikov kernel). The default choice is ‘gaussK’.</li>
<li>
<code>covariate_value</code>: A covariate value to plot the estimate
MTE</li>
<li>
<code>significance_level</code>: The significance level for the
construction of uniform confidence band</li>
</ul>
</div>
<div class="section level4">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a>
</h4>
<p><code><a href="../reference/uniform_con_gen.html">uniform_con_gen()</a></code> returns a list that contains the
following five elements:</p>
<ul>
<li><p><code>Data</code>: A data frame equipped with the estimated
propensity score</p></li>
<li><p><code>Estimation</code>: A data frame of the following results:
evaluation point of MTE, estimated value of MTE, standard error of MTE,
Lower bound of a confidence band , Upper bound of a confidence band
ranging from <span class="math inline">\(0.05*\lceil
\text{l_eval}/0.05\rceil\)</span> to <span class="math inline">\(0.05*\lfloor \text{u_eval}/0.05\rfloor\)</span>
with width <span class="math inline">\(0.05\)</span>.</p></li>
<li><p><code>Beta</code>: Finite parameters of an MTE function estimated
by partially linear estimation</p></li>
<li><p><code>SE</code>: The standard error of estimated
parameters</p></li>
</ul>
<p>-<code>critical_value</code>: A critical value corresponding to the
significance level chosen</p>
<ul>
<li>
<code>Plot</code>: A list that contains the ggplot elements for
uniform confidence band</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>First, we generate the data used for the estimation of MTE, icluding
outcome, covariates, instruments, and tretament.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://TXT872.github.io/mteucb/">mteucb</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate artificial data</span></span>
<span><span class="co">#: The number of cross-sectional units</span></span>
<span><span class="co"># tau: The length of time series</span></span>
<span><span class="co"># continuous: Generate a continuous (resp. discrete) covariate if it is TRUE (resp. FALSE).</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Generate covariates and instruments with sample size 2000.</span></span>
<span><span class="va">SS</span><span class="op">&lt;-</span><span class="fl">2000</span></span>
<span><span class="va">X1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">X2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">X3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">X4</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">Z1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">Z2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">Z3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">Z4</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mean<span class="op">=</span><span class="fl">0</span>,sd<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Generate unobserved heterogeneity and errors to generate outcome and treatment</span></span>
<span><span class="va">E0</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.5</span>,<span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="va">E1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">1</span>,<span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">E2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>,<span class="fl">0.8</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">E</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">E0</span>,<span class="va">E1</span>,<span class="va">E2</span><span class="op">)</span></span>
<span><span class="va">E4</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">SS</span>,mu<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,Sigma<span class="op">=</span><span class="va">E</span><span class="op">)</span></span>
<span><span class="va">U0</span><span class="op">&lt;-</span><span class="va">E4</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">U1</span><span class="op">&lt;-</span><span class="va">E4</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">V</span><span class="op">&lt;-</span><span class="va">E4</span><span class="op">[</span>,<span class="fl">3</span><span class="op">]</span></span>
<span><span class="va">Expl</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">X1</span>,<span class="va">X2</span>,<span class="va">X3</span>,<span class="va">X4</span><span class="op">)</span></span>
<span><span class="va">Instr</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">X1</span>,<span class="va">X2</span>,<span class="va">X3</span>,<span class="va">X4</span>,<span class="va">Z1</span>,<span class="va">Z2</span>,<span class="va">Z3</span>,<span class="va">Z4</span><span class="op">)</span></span>
<span><span class="va">PInstr</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">Z1</span>,<span class="va">Z2</span>,<span class="va">Z3</span>,<span class="va">Z4</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Define parameters.</span></span>
<span><span class="va">beta0</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.1</span>,<span class="op">-</span><span class="fl">0.1</span>,<span class="op">-</span><span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">beta1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>,<span class="fl">0.4</span>,<span class="op">-</span><span class="fl">0.4</span>,<span class="op">-</span><span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">ganma0</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.4</span>,<span class="fl">0.3</span>,<span class="fl">0.3</span>,<span class="fl">0.3</span>,<span class="fl">0.3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Generate outcome and treatment</span></span>
<span><span class="va">D</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="va">SS</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">SS</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">(</span><span class="va">ganma0</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="op">(</span><span class="va">Instr</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="va">V</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">D</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">=</span><span class="fl">1</span><span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">Y</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="va">SS</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">SS</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">Y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">&lt;-</span><span class="va">D</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">*</span><span class="op">(</span><span class="op">(</span><span class="va">beta1</span><span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span><span class="va">Expl</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="va">U1</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">D</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="op">(</span><span class="va">beta0</span><span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span><span class="va">Expl</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="va">U0</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">demo</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">Y</span>,<span class="va">Expl</span>,<span class="va">PInstr</span>,<span class="va">D</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can check the generated variable by using <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">demo</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Y         X1          X2         X3          X4         Z1         Z2</span></span>
<span><span class="co">#&gt; 1 0.1702768 -0.6264538 -0.88614959 -1.1346302 -0.61882708  0.2637034 -0.8043316</span></span>
<span><span class="co">#&gt; 2 1.8243183  0.1836433 -1.92225490  0.7645571 -1.10942196 -0.8294518 -1.0565257</span></span>
<span><span class="co">#&gt; 3 0.6071792 -0.8356286  1.61970074  0.5707101 -2.17033523 -1.4616348 -1.0353958</span></span>
<span><span class="co">#&gt; 4 0.7473837  1.5952808  0.51926990 -1.3516939 -0.03130307  1.6839902 -1.1855604</span></span>
<span><span class="co">#&gt; 5 1.5750997  0.3295078 -0.05584993 -2.0298855 -0.26039848 -1.5443243 -0.5004395</span></span>
<span><span class="co">#&gt; 6 1.7978026 -0.8204684  0.69641761  0.5904787  0.53443047 -0.1908871 -0.5249887</span></span>
<span><span class="co">#&gt;            Z3         Z4 D</span></span>
<span><span class="co">#&gt; 1 -0.93910663  0.5232667 0</span></span>
<span><span class="co">#&gt; 2  1.39366493  0.9935537 0</span></span>
<span><span class="co">#&gt; 3  1.62581486  0.2737370 0</span></span>
<span><span class="co">#&gt; 4  0.40900106 -0.6949193 0</span></span>
<span><span class="co">#&gt; 5 -0.09255856 -0.7180502 0</span></span>
<span><span class="co">#&gt; 6  0.20609871 -0.1019895 0</span></span></code></pre></div>
<p>To generate a confidence band, we set some parameters</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Supp_P_hut_U</span><span class="op">&lt;-</span><span class="fl">0.85</span></span>
<span><span class="va">Supp_P_hut_L</span><span class="op">&lt;-</span><span class="fl">0.15</span></span>
<span><span class="va">O_SS</span><span class="op">&lt;-</span><span class="fl">1000</span></span>
<span><span class="va">B2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">Supp_P_hut_L</span>,<span class="va">Supp_P_hut_U</span>,length<span class="op">=</span><span class="va">O_SS</span><span class="op">)</span></span>
<span><span class="va">covariate_value</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p>By using <code>unif_con_gen()</code>, we obtain a confidence band of
a MTE function with some other information.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/uniform_con_gen.html">uniform_con_gen</a></span><span class="op">(</span>outcome_name<span class="op">=</span><span class="st">"Y"</span>,</span>
<span>                                 covariate_name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X1"</span>,<span class="st">"X2"</span>,<span class="st">"X3"</span>,<span class="st">"X4"</span><span class="op">)</span>,</span>
<span>                                 instrument_name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Z1"</span>,<span class="st">"Z2"</span>,<span class="st">"Z3"</span>,<span class="st">"Z4"</span><span class="op">)</span>,</span>
<span>                                 treatment_name<span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                                 data<span class="op">=</span><span class="va">demo</span>,</span>
<span>                                 family<span class="op">=</span><span class="st">"probit"</span>,</span>
<span>                                 trim<span class="op">=</span><span class="fl">0.01</span>,</span>
<span>                                 intercept<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>                                 se_type<span class="op">=</span><span class="st">"HC2"</span>,</span>
<span>                                 bw<span class="op">=</span><span class="fl">0.1</span>,</span>
<span>                                 l_eval<span class="op">=</span><span class="fl">0.15</span>,</span>
<span>                                 u_eval<span class="op">=</span><span class="fl">0.85</span>,</span>
<span>                                 covariate_value<span class="op">=</span><span class="va">covariate_value</span>,</span>
<span>                                 significance_level<span class="op">=</span><span class="fl">0.05</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">Data</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Y          X1         X2          X3         X4         Z1</span></span>
<span><span class="co">#&gt; 1 -1.832737  0.73832471 -1.3102835  1.61034155  1.6083702  0.5471262</span></span>
<span><span class="co">#&gt; 2 -2.476944 -0.30538839 -0.2080786  1.36829791  0.1856225 -0.4198042</span></span>
<span><span class="co">#&gt; 3 -1.116913 -0.04493361  1.2912720 -0.08479864  1.3156956  1.0565484</span></span>
<span><span class="co">#&gt; 4 -1.912261  0.94383621 -0.8751468  1.66760644  1.4469536 -2.2305143</span></span>
<span><span class="co">#&gt; 5  1.726090  0.59390132  1.4251896  0.30185634  1.0134914 -0.7637768</span></span>
<span><span class="co">#&gt; 6  2.523938  0.61982575  2.3833280 -0.09983139 -0.6731739 -0.5497419</span></span>
<span><span class="co">#&gt;            Z2          Z3         Z4 D     P_hut</span></span>
<span><span class="co">#&gt; 1  0.47196813 -0.46000136  1.6316872 1 0.9359741</span></span>
<span><span class="co">#&gt; 2  1.25931803 -1.46018697 -2.0730307 1 0.4289610</span></span>
<span><span class="co">#&gt; 3 -0.08022106  1.04643156 -0.6111537 1 0.9180863</span></span>
<span><span class="co">#&gt; 4 -0.09943981  1.05350591  0.2318669 1 0.8162267</span></span>
<span><span class="co">#&gt; 5  1.85777954  0.05590213 -0.9673166 1 0.9354695</span></span>
<span><span class="co">#&gt; 6 -1.61676311  0.65319738 -0.5557610 1 0.6779880</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">Estimation</span></span>
<span><span class="co">#&gt;    P_hut         MTE        SE  LB of UCB UB of UCB</span></span>
<span><span class="co">#&gt; 1   0.15 -0.54599720 0.4206323 -1.4027188 0.3107244</span></span>
<span><span class="co">#&gt; 2   0.20 -0.69420539 0.4109986 -1.5313055 0.1428948</span></span>
<span><span class="co">#&gt; 3   0.25 -0.66520261 0.4075206 -1.4952190 0.1648138</span></span>
<span><span class="co">#&gt; 4   0.30 -0.46237077 0.4066253 -1.2905637 0.3658221</span></span>
<span><span class="co">#&gt; 5   0.35 -0.21023036 0.4070323 -1.0392521 0.6187914</span></span>
<span><span class="co">#&gt; 6   0.40 -0.02577382 0.4077988 -0.8563568 0.8048092</span></span>
<span><span class="co">#&gt; 7   0.45  0.04848320 0.4073579 -0.7812018 0.8781682</span></span>
<span><span class="co">#&gt; 8   0.50  0.04216056 0.4038453 -0.7803702 0.8646913</span></span>
<span><span class="co">#&gt; 9   0.55  0.01461326 0.3960130 -0.7919650 0.8211915</span></span>
<span><span class="co">#&gt; 10  0.60  0.01589843 0.3842433 -0.7667080 0.7985048</span></span>
<span><span class="co">#&gt; 11  0.65  0.06513431 0.3709414 -0.6903794 0.8206480</span></span>
<span><span class="co">#&gt; 12  0.70  0.15767300 0.3596004 -0.5747420 0.8900880</span></span>
<span><span class="co">#&gt; 13  0.75  0.29425467 0.3534008 -0.4255334 1.0140428</span></span>
<span><span class="co">#&gt; 14  0.80  0.52357965 0.3548879 -0.1992371 1.2463964</span></span>
<span><span class="co">#&gt; 15  0.85  0.99496720 0.3670508  0.2473776 1.7425568</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">Beta</span></span>
<span><span class="co">#&gt;      beta0_est  beta1_est</span></span>
<span><span class="co">#&gt; X1  0.54157944  0.8229410</span></span>
<span><span class="co">#&gt; X2  0.03497841  0.3827321</span></span>
<span><span class="co">#&gt; X3 -0.08277620 -0.4457280</span></span>
<span><span class="co">#&gt; X4 -0.45948960 -0.7678714</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">SE</span></span>
<span><span class="co">#&gt;      beta0_se   beta1_se</span></span>
<span><span class="co">#&gt; X1 0.04659124 0.04895943</span></span>
<span><span class="co">#&gt; X2 0.04649884 0.04673356</span></span>
<span><span class="co">#&gt; X3 0.04734397 0.04960917</span></span>
<span><span class="co">#&gt; X4 0.04492039 0.04554856</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">critical_value</span></span>
<span><span class="co">#&gt; [1] 2.819258</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Final_Result_Ex</span><span class="op">$</span><span class="va">Plot</span></span></code></pre></div>
<p><img src="uniform_con_gen_files/figure-html/unnamed-chunk-5-1.png" width="720"></p>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<ul>
<li>
</ul>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<ul>
<li>Tsuda, T, Jin, Y., &amp; Okui, R. (2024+). Uniform Confidence Band
for Marginal Treatment Effect Function. will be available on arXiv.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Toshiki Tsuda, Jin Yanchun, Ryo Okui.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
