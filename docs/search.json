[{"path":"https://TXT872.github.io/mteucb/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 mteucb authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/beta_gen.html","id":"functions","dir":"Articles","previous_headings":"","what":"Functions","title":"beta_gen","text":"mteucb provides four functions : p_hut_gen(): Estimation propensity score thourgh maximum likelihood estimation. beta_hut_gen(): Estimation finite parameters partially linear estimation. unif_gen(): Computation uniform confidence bands MTE function given parametric part MTE known. uniform_con_gen(): Computation uniform confidence bands MTE function given data. page, introduce use beta_hut_gen() obtaining finite dimensional parameters MTE function.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/beta_gen.html","id":"arguments","dir":"Articles","previous_headings":"Functions","what":"Arguments","title":"beta_gen","text":"outcome_name: name outcome covariate_name: name covariate instrument_name: name instrument variables treatment_name: name treatment variable data: data.frame used estimation MTE family: distribution used calculation propensity score. can choose “probit” “logit”. default choice “probit”. trim: mitigate effect ill behavior estimtaed propensity scores, set less value trim larger (1-value trim) value value trim (1-value trim). intercept: ‘TRUE’ ‘FLASE’ option decide whether include intercept estimating propensity score . default choice ‘TRUE’. se_type: sort standard error sought. options “HC0”, “HC1” (“stata”, equivalent) , “HC2” (default), “HC3”, “classical”.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/beta_gen.html","id":"returns","dir":"Articles","previous_headings":"Functions","what":"Returns","title":"beta_gen","text":"beta_gen() returns list contains following two elements: Beta: Finite parameters MTE function estimated partially linear estimation SE: standard error estimated parameters","code":""},{"path":"https://TXT872.github.io/mteucb/articles/beta_gen.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"beta_gen","text":"First, generate data used estimation MTE, icluding outcome, covariates, instruments, tretament. can check generated variable using head(). using beta_gen(), obtain finite parameters MTE function standard error.","code":"# Load the package library(mteucb) library(MASS) # Generate artificial data #: The number of cross-sectional units # tau: The length of time series # continuous: Generate a continuous (resp. discrete) covariate if it is TRUE (resp. FALSE). set.seed(1)  #Generate covariates and instruments with sample size 2000. SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1)  #Generate unobserved heterogeneity and errors to generate outcome and treatment E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4)  #Define parameters. beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3)  #Generate outcome and treatment D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) head(demo) #>           Y         X1          X2         X3          X4         Z1         Z2 #> 1 0.1702768 -0.6264538 -0.88614959 -1.1346302 -0.61882708  0.2637034 -0.8043316 #> 2 1.8243183  0.1836433 -1.92225490  0.7645571 -1.10942196 -0.8294518 -1.0565257 #> 3 0.6071792 -0.8356286  1.61970074  0.5707101 -2.17033523 -1.4616348 -1.0353958 #> 4 0.7473837  1.5952808  0.51926990 -1.3516939 -0.03130307  1.6839902 -1.1855604 #> 5 1.5750997  0.3295078 -0.05584993 -2.0298855 -0.26039848 -1.5443243 -0.5004395 #> 6 1.7978026 -0.8204684  0.69641761  0.5904787  0.53443047 -0.1908871 -0.5249887 #>            Z3         Z4 D #> 1 -0.93910663  0.5232667 0 #> 2  1.39366493  0.9935537 0 #> 3  1.62581486  0.2737370 0 #> 4  0.40900106 -0.6949193 0 #> 5 -0.09255856 -0.7180502 0 #> 6  0.20609871 -0.1019895 0 RESULT_Beta<-beta_gen(outcome_name=\"Y\",                       covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                       instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                       treatment_name= \"D\",                       data=demo,                       family=\"probit\",                       trim=0.01,                       intercept=TRUE,                       se_type=\"HC2\" )  head(RESULT_Beta$Beta) #>      beta0_est  beta1_est #> X1  0.51974430  0.8307576 #> X2  0.02449859  0.3672322 #> X3 -0.08980793 -0.4560943 #> X4 -0.47964813 -0.7765918 head(RESULT_Beta$SE) #>      beta0_se   beta1_se #> X1 0.03445834 0.03744455 #> X2 0.03090390 0.03311829 #> X3 0.03534125 0.03908622 #> X4 0.03780697 0.03913189"},{"path":[]},{"path":"https://TXT872.github.io/mteucb/articles/beta_gen.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"beta_gen","text":"Carneiro Lee (2009). Estimating distributions potential outcomes using local instrumental variables application changes college enrollment wage inequality. Journal Econometrics, 2009, vol. 149, issue 2, 191-208 Tsuda, T, Jin, Y., & Okui, R. (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/p_hut_gen.html","id":"functions","dir":"Articles","previous_headings":"","what":"Functions","title":"p_hut_gen","text":"mteucb provides four functions : p_hut_gen(): Estimation propensity score thourgh maximum likelihood estimation. beta_hut_gen(): Estimation finite parameters partially linear estimation. unif_gen(): Computation uniform confidence bands MTE function given parametric part MTE known. uniform_con_gen(): Computation uniform confidence bands MTE function given data. page, introduce use p_hut_gen() obtaining estimated propensity scores.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/p_hut_gen.html","id":"arguments","dir":"Articles","previous_headings":"Functions","what":"Arguments","title":"p_hut_gen","text":"outcome_name: name outcome covariate_name: name covariate instrument_name: name instrument variables treatment_name: name treatment variable data: data.frame used estimation MTE family: distribution used calculation propensity score. can choose “probit” “logit”. default choice “probit”. trim: mitigate effect ill behavior estimated propensity scores, set estimated values less larger value trim value value trim. default choice “0.01”. intercept: ‘TRUE’ ‘FLASE’ option decide whether include intercept estimating propensity score . default choice ‘TRUE’.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/p_hut_gen.html","id":"returns","dir":"Articles","previous_headings":"Functions","what":"Returns","title":"p_hut_gen","text":"p_hut_gen() returns list contains following three elements: Data: data frame equipped estimated propensity score SampleSize: number data used estimate propensity score P_hut: data frame includes estimated propensity score","code":""},{"path":"https://TXT872.github.io/mteucb/articles/p_hut_gen.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"p_hut_gen","text":"First, generate data used estimation MTE, icluding outcome, covariates, instruments, tretament. can check generated variable using head(). using p_hut_gen(), obtain dataframe estimated propensity score.","code":"# Load the package library(mteucb) library(MASS)  # Generate artificial data #: The number of cross-sectional units # tau: The length of time series # continuous: Generate a continuous (resp. discrete) covariate if it is TRUE (resp. FALSE). set.seed(1)  #Generate covariates and instruments with sample size 2000. SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1)  #Generate unobserved heterogeneity and errors to generate outcome and treatment E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4)  #Define parameters. beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3)  #Generate outcome and treatment D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) head(demo) #>           Y         X1          X2         X3          X4         Z1         Z2 #> 1 0.1702768 -0.6264538 -0.88614959 -1.1346302 -0.61882708  0.2637034 -0.8043316 #> 2 1.8243183  0.1836433 -1.92225490  0.7645571 -1.10942196 -0.8294518 -1.0565257 #> 3 0.6071792 -0.8356286  1.61970074  0.5707101 -2.17033523 -1.4616348 -1.0353958 #> 4 0.7473837  1.5952808  0.51926990 -1.3516939 -0.03130307  1.6839902 -1.1855604 #> 5 1.5750997  0.3295078 -0.05584993 -2.0298855 -0.26039848 -1.5443243 -0.5004395 #> 6 1.7978026 -0.8204684  0.69641761  0.5904787  0.53443047 -0.1908871 -0.5249887 #>            Z3         Z4 D #> 1 -0.93910663  0.5232667 0 #> 2  1.39366493  0.9935537 0 #> 3  1.62581486  0.2737370 0 #> 4  0.40900106 -0.6949193 0 #> 5 -0.09255856 -0.7180502 0 #> 6  0.20609871 -0.1019895 0 RESULT_P_hut<-p_hut_gen(outcome_name=\"Y\",                                  covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                                  instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                                  treatment_name= \"D\",                                  data=demo,                                  family=\"probit\",                                   trim=0.01, #                                  intercept=TRUE                                 ) head(RESULT_P_hut$Data) #>           Y          X1         X2          X3         X4         Z1 #> 1 -1.832737  0.73832471 -1.3102835  1.61034155  1.6083702  0.5471262 #> 2 -2.476944 -0.30538839 -0.2080786  1.36829791  0.1856225 -0.4198042 #> 3 -1.116913 -0.04493361  1.2912720 -0.08479864  1.3156956  1.0565484 #> 4 -1.912261  0.94383621 -0.8751468  1.66760644  1.4469536 -2.2305143 #> 5  1.726090  0.59390132  1.4251896  0.30185634  1.0134914 -0.7637768 #> 6  2.523938  0.61982575  2.3833280 -0.09983139 -0.6731739 -0.5497419 #>            Z2          Z3         Z4 D     P_hut #> 1  0.47196813 -0.46000136  1.6316872 1 0.9359741 #> 2  1.25931803 -1.46018697 -2.0730307 1 0.4289610 #> 3 -0.08022106  1.04643156 -0.6111537 1 0.9180863 #> 4 -0.09943981  1.05350591  0.2318669 1 0.8162267 #> 5  1.85777954  0.05590213 -0.9673166 1 0.9354695 #> 6 -1.61676311  0.65319738 -0.5557610 1 0.6779880 head(RESULT_P_hut$SampleSize) #> [1] 1916 head(RESULT_P_hut$P_hut) #> [1] 0.9359741 0.4289610 0.9180863 0.8162267 0.9354695 0.6779880"},{"path":[]},{"path":"https://TXT872.github.io/mteucb/articles/p_hut_gen.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"p_hut_gen","text":"Tsuda, T, Jin, Y., & Okui, R. (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/unif_gen.html","id":"functions","dir":"Articles","previous_headings":"","what":"Functions","title":"unif_gen","text":"mteucb provides four functions : p_hut_gen(): Estimation propensity score thourgh maximum likelihood estimation. beta_hut_gen(): Estimation finite parameters partially linear estimation. unif_gen(): Computation uniform confidence bands MTE function given parametric part MTE known. uniform_con_gen(): Computation uniform confidence bands MTE function given data. page, introduce use unif_gen() obtaining confidence band MTE function given data estimated propensity score estimated finite parameters.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/unif_gen.html","id":"arguments","dir":"Articles","previous_headings":"Functions","what":"Arguments","title":"unif_gen","text":"outcome_name: name outcome covariate_name: name covariate instrument_name: name instrument variables treatment_name: name treatment variable P_hut_name: name estimated propensity scores. beta0: vector parameters linear model outcome given individual treated beta1: vector parameters linear model outcome given individual treated data: data.frame including propensity scores used estimation MTE bw: bandwidth used estimating nonparametric part MTE l_eval: minimum value evaluation points estimated MTE u_eval: maximum value evaluation points estimated MTE kernel: kernel function used estimating nonparametric part MTE. can choose ‘gaussK’ (gaussian kernel), ‘EapK’ (Epanechinikov kernel). default choice ‘gaussK’. covariate_value: covariate value plot estimate MTE significance_level: significance level construction uniform confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/articles/unif_gen.html","id":"returns","dir":"Articles","previous_headings":"Functions","what":"Returns","title":"unif_gen","text":"unif_gen() returns list contains following two elements: Estimation: data frame following results: outcome, covariate, instrument variables, treatment propensity score ranging \\(0.05*\\lceil \\text{l_eval}/0.05\\rceil\\) \\(0.05*\\lfloor \\text{u_eval}/0.05\\rfloor\\) width \\(0.05\\). Plot: list contains ggplot elements unifrom confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/articles/unif_gen.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"unif_gen","text":"First, generate data used estimation MTE, icluding outcome, covariates, instruments, tretament. can check generated variable using head(). generate confidence band, set parameters using unif_gen(), obtain confidence band MTE function.","code":"# Load the package library(mteucb) library(MASS)  # Generate artificial data #: The number of cross-sectional units # tau: The length of time series # continuous: Generate a continuous (resp. discrete) covariate if it is TRUE (resp. FALSE). set.seed(1)  #Generate covariates and instruments with sample size 2000. SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1)  #Generate unobserved heterogeneity and errors to generate outcome and treatment E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4)  #Define parameters. beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3)  #Generate outcome and treatment D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) head(demo) #>           Y         X1          X2         X3          X4         Z1         Z2 #> 1 0.1702768 -0.6264538 -0.88614959 -1.1346302 -0.61882708  0.2637034 -0.8043316 #> 2 1.8243183  0.1836433 -1.92225490  0.7645571 -1.10942196 -0.8294518 -1.0565257 #> 3 0.6071792 -0.8356286  1.61970074  0.5707101 -2.17033523 -1.4616348 -1.0353958 #> 4 0.7473837  1.5952808  0.51926990 -1.3516939 -0.03130307  1.6839902 -1.1855604 #> 5 1.5750997  0.3295078 -0.05584993 -2.0298855 -0.26039848 -1.5443243 -0.5004395 #> 6 1.7978026 -0.8204684  0.69641761  0.5904787  0.53443047 -0.1908871 -0.5249887 #>            Z3         Z4 D #> 1 -0.93910663  0.5232667 0 #> 2  1.39366493  0.9935537 0 #> 3  1.62581486  0.2737370 0 #> 4  0.40900106 -0.6949193 0 #> 5 -0.09255856 -0.7180502 0 #> 6  0.20609871 -0.1019895 0 Supp_P_hut_U<-0.85 Supp_P_hut_L<-0.15 O_SS<-1000 B2<-seq(Supp_P_hut_L,Supp_P_hut_U,length=O_SS) covariate_value<-c(0,0,0,0) RESULT_P_hut<-p_hut_gen(outcome_name=\"Y\",                         covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                         instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                         treatment_name= \"D\",                         data=demo,                         family=\"probit\",                         trim=0.01,                         intercept=TRUE )  RESULT_unif<-unif_gen(outcome_name=\"Y\",                       covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                       instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                       treatment_name= \"D\",                       P_hut_name= \"P_hut\",                       bw=0.1,                       beta0=beta0,                       beta1=beta1,                       data=RESULT_P_hut$Data,                       l_eval=0.15,                       u_eval=0.85,                       kernel=locpol::gaussK,                       covariate_value=covariate_value,                       significance_level=0.05 )  RESULT_unif$Estimation #>    P_hut          MTE        SE  LB of UCB UB of UCB #> 1   0.15 -0.517925332 0.4218355 -1.3770975 0.3412469 #> 2   0.20 -0.642550942 0.4123960 -1.4824973 0.1973954 #> 3   0.25 -0.613286387 0.4090528 -1.4464234 0.2198507 #> 4   0.30 -0.419896721 0.4081820 -1.2512601 0.4114667 #> 5   0.35 -0.177070478 0.4084703 -1.0090211 0.6548801 #> 6   0.40  0.002566551 0.4089810 -0.8304243 0.8355574 #> 7   0.45  0.075548265 0.4081995 -0.7558509 0.9069474 #> 8   0.50  0.067243924 0.4043503 -0.7563154 0.8908032 #> 9   0.55  0.033884403 0.3962759 -0.7732294 0.8409982 #> 10  0.60  0.027043899 0.3844043 -0.7558904 0.8099782 #> 11  0.65  0.070744690 0.3711239 -0.6851408 0.8266302 #> 12  0.70  0.162877718 0.3598763 -0.5700992 0.8958547 #> 13  0.75  0.301370639 0.3537934 -0.4192171 1.0219583 #> 14  0.80  0.529850929 0.3553951 -0.1939989 1.2537008 #> 15  0.85  0.996923089 0.3676701  0.2480722 1.7457740 RESULT_unif$Plot"},{"path":[]},{"path":"https://TXT872.github.io/mteucb/articles/unif_gen.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"unif_gen","text":"Tsuda, T, Jin, Y., & Okui, R. (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/uniform_con_gen.html","id":"functions","dir":"Articles","previous_headings":"","what":"Functions","title":"uniform_con_gen","text":"mteucb provides four functions : p_hut_gen(): Estimation propensity score thourgh maximum likelihood estimation. beta_hut_gen(): Estimation finite parameters partially linear estimation. unif_gen(): Computation uniform confidence bands MTE function given parametric part MTE known. uniform_con_gen(): Computation uniform confidence bands MTE function given data. page, introduce use unif_con_gen() obtaining confidence band MTE function.","code":""},{"path":"https://TXT872.github.io/mteucb/articles/uniform_con_gen.html","id":"arguments","dir":"Articles","previous_headings":"Functions","what":"Arguments","title":"uniform_con_gen","text":"outcome_name: name outcome covariate_name: name covariate instrument_name: name instrument variables treatment_name: name treatment variable data: data.frame used estimation MTE familiy: distribution used calculation propensity score. can choose “probit” “logit”. default choice “probit”. trim: mitigate effect ill behavior estimated propensity scores, set estimated values less larger value trim value value trim. default choice “0.01”. intercept: ‘TRUE’ ‘FLASE’ option decide whether include intercept estimating propensity score . default choice ‘TRUE’. se_type: sort standard error sought. options “HC0”, “HC1” (“stata”, equivalent) , “HC2” (default), “HC3”, “classical”. bw: bandwidth used estimating nonparametric part MTE l_eval: minimum value evaluation points estimated MTE u_eval: maximum value evaluation points estimated MTE kernel: kernel function used estimating nonparametric part MTE. can choose ‘gaussK’ (gaussian kernel), ‘EapK’ (Epanechinikov kernel). default choice ‘gaussK’. covariate_value: covariate value plot estimate MTE significance_level: significance level construction uniform confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/articles/uniform_con_gen.html","id":"returns","dir":"Articles","previous_headings":"Functions","what":"Returns","title":"uniform_con_gen","text":"uniform_con_gen() returns list contains following five elements: Data: data frame equipped estimated propensity score Estimation: data frame following results: evaluation point MTE, estimated value MTE, standard error MTE, Lower bound confidence band , Upper bound confidence band ranging \\(0.05*\\lceil \\text{l_eval}/0.05\\rceil\\) \\(0.05*\\lfloor \\text{u_eval}/0.05\\rfloor\\) width \\(0.05\\). Beta: Finite parameters MTE function estimated partially linear estimation SE: standard error estimated parameters Plot: list contains ggplot elements uniform confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/articles/uniform_con_gen.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"uniform_con_gen","text":"First, generate data used estimation MTE, icluding outcome, covariates, instruments, tretament. can check generated variable using head(). generate confidence band, set parameters using unif_con_gen(), obtain confidence band MTE function.","code":"# Load the package library(mteucb) library(MASS)  # Generate artificial data #: The number of cross-sectional units # tau: The length of time series # continuous: Generate a continuous (resp. discrete) covariate if it is TRUE (resp. FALSE). set.seed(1)  #Generate covariates and instruments with sample size 2000. SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1)  #Generate unobserved heterogeneity and errors to generate outcome and treatment E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4)  #Define parameters. beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3)  #Generate outcome and treatment D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) head(demo) #>           Y         X1          X2         X3          X4         Z1         Z2 #> 1 0.1702768 -0.6264538 -0.88614959 -1.1346302 -0.61882708  0.2637034 -0.8043316 #> 2 1.8243183  0.1836433 -1.92225490  0.7645571 -1.10942196 -0.8294518 -1.0565257 #> 3 0.6071792 -0.8356286  1.61970074  0.5707101 -2.17033523 -1.4616348 -1.0353958 #> 4 0.7473837  1.5952808  0.51926990 -1.3516939 -0.03130307  1.6839902 -1.1855604 #> 5 1.5750997  0.3295078 -0.05584993 -2.0298855 -0.26039848 -1.5443243 -0.5004395 #> 6 1.7978026 -0.8204684  0.69641761  0.5904787  0.53443047 -0.1908871 -0.5249887 #>            Z3         Z4 D #> 1 -0.93910663  0.5232667 0 #> 2  1.39366493  0.9935537 0 #> 3  1.62581486  0.2737370 0 #> 4  0.40900106 -0.6949193 0 #> 5 -0.09255856 -0.7180502 0 #> 6  0.20609871 -0.1019895 0 Supp_P_hut_U<-0.85 Supp_P_hut_L<-0.15 O_SS<-1000 B2<-seq(Supp_P_hut_L,Supp_P_hut_U,length=O_SS) covariate_value<-c(0,0,0,0) Final_Result_Ex<-uniform_con_gen(outcome_name=\"Y\",                                  covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                                  instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                                  treatment_name= \"D\",                                  data=demo,                                  family=\"probit\",                                  trim=0.01,                                  intercept=TRUE,                                  se_type=\"HC2\",                                  bw=0.1,                                  l_eval=0.15,                                  u_eval=0.85,                                  covariate_value=covariate_value,                                  significance_level=0.05 )  head(Final_Result_Ex$Data) #>           Y          X1         X2          X3         X4         Z1 #> 1 -1.832737  0.73832471 -1.3102835  1.61034155  1.6083702  0.5471262 #> 2 -2.476944 -0.30538839 -0.2080786  1.36829791  0.1856225 -0.4198042 #> 3 -1.116913 -0.04493361  1.2912720 -0.08479864  1.3156956  1.0565484 #> 4 -1.912261  0.94383621 -0.8751468  1.66760644  1.4469536 -2.2305143 #> 5  1.726090  0.59390132  1.4251896  0.30185634  1.0134914 -0.7637768 #> 6  2.523938  0.61982575  2.3833280 -0.09983139 -0.6731739 -0.5497419 #>            Z2          Z3         Z4 D     P_hut #> 1  0.47196813 -0.46000136  1.6316872 1 0.9359741 #> 2  1.25931803 -1.46018697 -2.0730307 1 0.4289610 #> 3 -0.08022106  1.04643156 -0.6111537 1 0.9180863 #> 4 -0.09943981  1.05350591  0.2318669 1 0.8162267 #> 5  1.85777954  0.05590213 -0.9673166 1 0.9354695 #> 6 -1.61676311  0.65319738 -0.5557610 1 0.6779880 Final_Result_Ex$Estimation #>    P_hut         MTE        SE  LB of UCB UB of UCB #> 1   0.15 -0.54599720 0.4206323 -1.4027188 0.3107244 #> 2   0.20 -0.69420539 0.4109986 -1.5313055 0.1428948 #> 3   0.25 -0.66520261 0.4075206 -1.4952190 0.1648138 #> 4   0.30 -0.46237077 0.4066253 -1.2905637 0.3658221 #> 5   0.35 -0.21023036 0.4070323 -1.0392521 0.6187914 #> 6   0.40 -0.02577382 0.4077988 -0.8563568 0.8048092 #> 7   0.45  0.04848320 0.4073579 -0.7812018 0.8781682 #> 8   0.50  0.04216056 0.4038453 -0.7803702 0.8646913 #> 9   0.55  0.01461326 0.3960130 -0.7919650 0.8211915 #> 10  0.60  0.01589843 0.3842433 -0.7667080 0.7985048 #> 11  0.65  0.06513431 0.3709414 -0.6903794 0.8206480 #> 12  0.70  0.15767300 0.3596004 -0.5747420 0.8900880 #> 13  0.75  0.29425467 0.3534008 -0.4255334 1.0140428 #> 14  0.80  0.52357965 0.3548879 -0.1992371 1.2463964 #> 15  0.85  0.99496720 0.3670508  0.2473776 1.7425568 Final_Result_Ex$Beta #>      beta0_est  beta1_est #> X1  0.54157944  0.8229410 #> X2  0.03497841  0.3827321 #> X3 -0.08277620 -0.4457280 #> X4 -0.45948960 -0.7678714 Final_Result_Ex$SE #>      beta0_se   beta1_se #> X1 0.04659124 0.04895943 #> X2 0.04649884 0.04673356 #> X3 0.04734397 0.04960917 #> X4 0.04492039 0.04554856 Final_Result_Ex$Plot"},{"path":[]},{"path":"https://TXT872.github.io/mteucb/articles/uniform_con_gen.html","id":"reference","dir":"Articles","previous_headings":"","what":"Reference","title":"uniform_con_gen","text":"Tsuda, T, Jin, Y., & Okui, R. (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv.","code":""},{"path":"https://TXT872.github.io/mteucb/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Toshiki Tsuda. Author, maintainer, copyright holder. Jin Yanchun. Author, copyright holder. Ryo Okui. Author, copyright holder.","code":""},{"path":"https://TXT872.github.io/mteucb/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tsuda T, Yanchun J, Okui R (2024). mteucb: Marginal Treatment Effect. R package version 0.0.1, https://TXT872.github.io/mteucb/.","code":"@Manual{,   title = {mteucb: Marginal Treatment Effect},   author = {Toshiki Tsuda and Jin Yanchun and Ryo Okui},   year = {2024},   note = {R package version 0.0.1},   url = {https://TXT872.github.io/mteucb/}, }"},{"path":"https://TXT872.github.io/mteucb/index.html","id":"mteucbuniform-confidence-band-for-the-marginal-treatment-function-tentative","dir":"","previous_headings":"","what":"Marginal Treatment Effect","title":"Marginal Treatment Effect","text":"mteucb package cmputes uniform confidence bands MTE function proposed Tsuda, Jin Okui (2024+). uniform confidence band covers true function prespecified probability. bands used make statistical inferences shape MTE function. Uniform confidence bands particularly useful can visualize statistical uncertainty behind estimated MTE function.","code":""},{"path":"https://TXT872.github.io/mteucb/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Marginal Treatment Effect","text":"can install development version mteucb GitHub:","code":"# install.packages(\"devtools\") if necessary devtools::install_github(\"TXT872/mteucb\",build_vignettes = TRUE)"},{"path":"https://TXT872.github.io/mteucb/index.html","id":"vignette","dir":"","previous_headings":"","what":"Vignette","title":"Marginal Treatment Effect","text":"detalis, see package vignette :","code":"# Getting Started with the mteucb Package Vignette  vignette(\"p_hut_gen\") # Generates Estimated Propensity Scores  vignette(\"beta_gen\") # Estimates a Parametric Part of a MTE Function   vignette(\"unif_gen\") # Provides the Uniform Confidence Band for a MTE Function  #Given a Parametric Part of a MTE Function is Estimated  vignette(\"uniform_con_gen\") # Provides the Uniform Confidence Band for a MTE Function from Data."},{"path":"https://TXT872.github.io/mteucb/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Marginal Treatment Effect","text":"Tsuda, T, Jin, Y., & Okui, R. (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv.","code":""},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":null,"dir":"Reference","previous_headings":"","what":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"bet_gen estimates parametric part MTE function estimation method invented Carneiro Lee (2009). details, see Carneiro Lee (2009).","code":""},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"","code":"beta_gen(   outcome_name = outcome_name,   covariate_name = covariate_name,   instrument_name = instrument_name,   treatment_name = treatment_name,   data = data,   family = \"probit\",   trim = 0.01,   intercept = TRUE,   se_type = \"HC2\" )"},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"outcome_name name outcome covariate_name name covariate instrument_name name instrument variables treatment_name name treatment variable data data.frame used estimation MTE. family distribution used calculation propensity score. can choose \"probit\" \"logit\". default choice \"probit\". trim, mitigate effect ill behavior estimtaed propensity scores, set less value trim larger (1-value trim) value value trim  (1-value trim). intercept 'TRUE' 'FLASE' option decide whether include intercept estimating propensity score . default choice 'TRUE'. se_type sort standard error sought. options \"HC0\", \"HC1\" (\"stata\", equivalent) , \"HC2\" (default), \"HC3\", \"classical\".","code":""},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"list contains following elements: Beta estimated value parametric parts MTE SE standard error coeffecient parametric parts MTE","code":""},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"Carneiro Lee (2009) Estimating distributions potential outcomes using local instrumental variables application changes college enrollment wage inequality. Journal Econometrics, 2009, vol. 149, issue 2, 191-208","code":""},{"path":"https://TXT872.github.io/mteucb/reference/beta_gen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coeffeicients of Parametric Part of Marginal Treatment Effect (MTE) Function . — beta_gen","text":"","code":"if (FALSE) { set.seed(1) library(MASS) SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1) E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4) beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3) D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D))   RESULT_Beta<-beta_gen(outcome_name=\"Y\",                       covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                       instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                       treatment_name= \"D\",                       data=demo,                       family=\"probit\",                       trim=0.01,                       intercept=TRUE,                       se_type=\"HC2\" ) }"},{"path":"https://TXT872.github.io/mteucb/reference/p_hut_gen.html","id":null,"dir":"Reference","previous_headings":"","what":"Propensity Score Generation — p_hut_gen","title":"Propensity Score Generation — p_hut_gen","text":"p_hut_gen generates estimated propensity scores","code":""},{"path":"https://TXT872.github.io/mteucb/reference/p_hut_gen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Propensity Score Generation — p_hut_gen","text":"","code":"p_hut_gen(   outcome_name = outcome_name,   covariate_name = covariate_name,   instrument_name = instrument_name,   treatment_name = treatment_name,   data = data,   family = \"probit\",   trim = 0.01,   intercept = TRUE )"},{"path":"https://TXT872.github.io/mteucb/reference/p_hut_gen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Propensity Score Generation — p_hut_gen","text":"outcome_name name outcome covariate_name name covariate instrument_name name instrument variables treatment_name name treatment variable data data.frame used estimation MTE family distribution used calculation propensity score. can choose \"probit\" \"logit\". default choice \"probit\". trim mitigate effect ill behavior estimated propensity scores, set estimated values less larger value trim  value value trim. default choice \"0.01\". intercept 'TRUE' 'FLASE' option decide whether include intercept estimating propensity score . default choice 'TRUE'.","code":""},{"path":"https://TXT872.github.io/mteucb/reference/p_hut_gen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Propensity Score Generation — p_hut_gen","text":"list contains following elements: Data data frame contains following elements:  outcome, covariate, instrument variables, treatment propensity score Sample Size Sample Size trimming P_hut estimated propensity scores","code":""},{"path":"https://TXT872.github.io/mteucb/reference/p_hut_gen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Propensity Score Generation — p_hut_gen","text":"","code":"if (FALSE) { set.seed(1) library(MASS) SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1) E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4) beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3) D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D))  RESULT_P_hut<-p_hut_gen(outcome_name=\"Y\",                         covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                         instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                         treatment_name= \"D\",                         data=demo,                         family=\"probit\",                         trim=0.01,                         intercept=TRUE ) }"},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":null,"dir":"Reference","previous_headings":"","what":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"unif_gen computes uniform confidence bands MTE function given parametric part MTE known. details, see Tsuda, Jin Okui (2024+).","code":""},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"","code":"unif_gen(   outcome_name = outcome_name,   covariate_name = covariate_name,   instrument_name = instrument_name,   treatment_name = treatment_name,   P_hut_name = P_hut_name,   beta0 = beta0,   beta1 = beta1,   data = data,   bw = bw,   l_eval = l_eval,   u_eval = u_eval,   kernel = locpol::gaussK,   covariate_value = covariate_value,   significance_level = 0.05 )"},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"outcome_name name outcome covariate_name name covariate instrument_name name instrument variables treatment_name name treatment variable P_hut_name name estimated propensity scores. beta0 vector parameters linear model outcome given individual treated beta1 vector parameters linear model outcome given individual treated data data.frame including propensity scores used estimation MTE bw bandwidth used estimating nonparametric part MTE l_eval minimum value evaluation points estimated MTE u_eval maximum value evaluation points estimated MTE kernel kernel function used estimating nonparametric part MTE. can choose 'gaussK' (gaussian kernel), 'EapK' (Epanechinikov kernel). default choice 'gaussK'. covariate_value covariate value plot estimate MTE significance_level significance level construction uniform confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"list contains following elements: Estimation data frame following results:  evaluation point MTE, estimated value MTE, standard error MTE, Lower bound confidence band , Upper bound confidence band Plot list contains ggplot elements unifrom confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"Tsuda, Jin Okui (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv","code":""},{"path":"https://TXT872.github.io/mteucb/reference/unif_gen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — unif_gen","text":"","code":"if (FALSE) { set.seed(1) library(MASS) SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1) E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4) beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3) D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) Supp_P_hut_U<-0.85 Supp_P_hut_L<-0.15 O_SS<-1000 B2<-seq(Supp_P_hut_L,Supp_P_hut_U,length=O_SS) covariate_value<-c(0,0,0,0)  RESULT_P_hut<-p_hut_gen(outcome_name=\"Y\",                         covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                         instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                         treatment_name= \"D\",                         data=demo,                         family=\"probit\",                         trim=0.01,                         intercept=TRUE )  RESULT_unif<-unif_gen(outcome_name=\"Y\",                       covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                       instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                       treatment_name= \"D\",                       P_hut_name= \"P_hut\",                       bw=0.1,                       beta0=beta0,                       beta1=beta1,                       data=RESULT_P_hut$Data,                       l_eval=0.15,                       u_eval=0.85,                       kernel=locpol::gaussK,                       covariate_value=covariate_value,                       significance_level=0.05 ) }"},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":null,"dir":"Reference","previous_headings":"","what":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"uniform_con_gen computes uniform confidence bands MTE function estimated semiparametric estimation method. details, see Tsuda, Jin Okui (2024+).","code":""},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"","code":"uniform_con_gen(   outcome_name = outcome_name,   covariate_name = covariate_name,   instrument_name = instrument_name,   treatment_name = treatment_name,   data = data,   family = \"probit\",   trim = 0.01,   intercept = TRUE,   se_type = \"HC2\",   bw = bw,   l_eval = l_eval,   u_eval = u_eval,   kernel = locpol::gaussK,   covariate_value = covariate_value,   significance_level = 0.05 )"},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"outcome_name name outcome covariate_name name covariate instrument_name name instrument variables treatment_name name treatment variable data data.frame used estimation MTE family distribution used calculation propensity score. can choose \"probit\" \"logit\". default choice \"probit\". trim mitigate effect ill behavior estimated propensity scores, set estimated values less larger value trim  value value trim. default choice \"0.01\". intercept 'TRUE' 'FLASE' option decide whether include intercept estimating propensity score . default choice 'TRUE'. se_type sort standard error sought. options \"HC0\", \"HC1\" (\"stata\", equivalent) , \"HC2\" (default), \"HC3\", \"classical\". bw bandwidth used estimating nonparametric part MTE l_eval minimum value evaluation points estimated MTE u_eval maximum value evaluation points estimated MTE kernel kernel function used estimating nonparametric part MTE. can choose 'gaussK' (gaussian kernel), 'EapK' (Epanechinikov kernel). default choice 'gaussK'. covariate_value covariate value plot estimate MTE. significance_level significance level construction uniform confidence band.","code":""},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"list contains following elements: Data data frame contains following elements:  outcome, covariate, instrument variables, treatment propensity score Estimation data frame following results:  evaluation point MTE, estimated value MTE, standard error MTE, Lower bound confidence band , Upper bound confidence band SE standard error coeffecient parametric parts MTE Plot list contains ggplot elements unifrom confidence band","code":""},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"Tsuda, Jin Okui (2024+). Uniform Confidence Band Marginal Treatment Effect Function. available arXiv","code":""},{"path":"https://TXT872.github.io/mteucb/reference/uniform_con_gen.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Uniform Confidence Bands for a Marginal Treatment Effect (MTE) Function . — uniform_con_gen","text":"","code":"if (FALSE) { set.seed(1) library(MASS) SS<-2000 X1<-rnorm(n=SS,mean=0,sd=1) X2<-rnorm(n=SS,mean=0,sd=1) X3<-rnorm(n=SS,mean=0,sd=1) X4<-rnorm(n=SS,mean=0,sd=1) Z1<-rnorm(n=SS,mean=0,sd=1) Z2<-rnorm(n=SS,mean=0,sd=1) Z3<-rnorm(n=SS,mean=0,sd=1) Z4<-rnorm(n=SS,mean=0,sd=1) E0<-c(1,0.5,0.3) E1<-c(0.5,1,0.8) E2<-c(0.3,0.8,1) E<-cbind(E0,E1,E2) E4<-mvrnorm(n=SS,mu=c(0,0,0),Sigma=E) U0<-E4[,1] U1<-E4[,2] V<-E4[,3] Expl<-cbind(X1,X2,X3,X4) Instr<-cbind(X1,X2,X3,X4,Z1,Z2,Z3,Z4) PInstr<-cbind(Z1,Z2,Z3,Z4) beta0<-c(0.5,0.1,-0.1,-0.5) beta1<-c(0.8,0.4,-0.4,-0.8) ganma0<-c(0.4,0.4,0.4,0.4,0.3,0.3,0.3,0.3) D<-numeric(SS) for(i in 1:SS){   if ((ganma0 %*% (Instr[i,]))>V[i]){     D[i]=1} } Y<-numeric(SS) for(i in 1:SS){   Y[i]<-D[i]*((beta1%*%Expl[i,])+U1[i])+(1-D[i])*((beta0%*%Expl[i,])+U0[i]) } demo=as.data.frame(cbind(Y,Expl,PInstr,D)) Supp_P_hut_U<-0.85 Supp_P_hut_L<-0.15 O_SS<-1000 B2<-seq(Supp_P_hut_L,Supp_P_hut_U,length=O_SS) covariate_value<-c(0,0,0,0) Final_Result_Ex<-uniform_con_gen(outcome_name=\"Y\",                                  covariate_name=c(\"X1\",\"X2\",\"X3\",\"X4\"),                                  instrument_name=c(\"Z1\",\"Z2\",\"Z3\",\"Z4\"),                                  treatment_name= \"D\",                                  data=demo,                                  family=\"probit\",                                  trim=0.01,                                  intercept=TRUE,                                  se_type=\"HC2\",                                  bw=0.1,                                  l_eval=0.15,                                  u_eval=0.85,                                  covariate_value=covariate_value,                                  significance_level=0.05 ) }"},{"path":"https://TXT872.github.io/mteucb/news/index.html","id":"mteucb-001","dir":"Changelog","previous_headings":"","what":"mteucb 0.0.1","title":"mteucb 0.0.1","text":"Added NEWS.md file track changes package. First version useful package three indvidual functions.","code":""}]
